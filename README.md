# YCSB-Rocksdb

Fork from YCSB-C
- separate load and run throughput
- add latency testing(use leveldb/util histogram)

## Quick Start

To build YCSB-C on Ubuntu, for example:

```
$ sudo apt-get install libtbb-dev librocksdb-dev
$ mkdir build
$ cd build
$ cmake ..
$ make
```

Run Workload A with a Rocksdb-based
implementation of the database, for example:
```
./ycsb -db faster -threads 8 -P ../workloads/workloadc.spec
```

Output Like this:
```
faster  ../workloads/workloadc.spec     8
# Loading records:      160000000
# Load throughput (KOPS): 1332.22
Count: 160000000  Average: 5.8681  StdDev: 70.70
Percentiles(us): P50: 4.99 P90: 10.48 P99: 19.09 P99.9: 28.59 P99.99: 38.51
------------------------------------------------------
[       0,       1 )     113   0.000%   0.000% 
[       1,       2 ) 2647265   1.655%   1.655% 
[       2,       3 ) 35526391  22.204%  23.859% ####
[       3,       4 ) 23989288  14.993%  38.852% ###
[       4,       5 ) 17981304  11.238%  50.090% ##
[       5,       6 ) 19906402  12.442%  62.532% ##
[       6,       7 ) 16661014  10.413%  72.945% ##
[       7,       8 ) 11688196   7.305%  80.250% #
[       8,       9 ) 8210372   5.131%  85.381% #
[       9,      10 ) 5710040   3.569%  88.950% #
[      10,      12 ) 7008825   4.381%  93.331% #
[      12,      14 ) 4409762   2.756%  96.087% #
[      14,      16 ) 2730505   1.707%  97.793% 
[      16,      18 ) 1481819   0.926%  98.720% 
[      18,      20 )  824356   0.515%  99.235% 
[      20,      25 )  894523   0.559%  99.794% 
[      25,      30 )  236270   0.148%  99.942% 
[      30,      35 )   64973   0.041%  99.982% 
[      35,      40 )   17923   0.011%  99.993% 
[      40,      45 )    5684   0.004%  99.997% 
[      45,      50 )    1996   0.001%  99.998% 
[      50,      60 )    1261   0.001%  99.999% 
[      60,      70 )     386   0.000%  99.999% 
[      70,      80 )     165   0.000%  99.999% 
[      80,      90 )     114   0.000%  99.999% 
[      90,     100 )      73   0.000%  99.999% 
[     100,     120 )     156   0.000%  99.999% 
[     120,     140 )      85   0.000% 100.000% 
[     140,     160 )      68   0.000% 100.000% 
[     160,     180 )      51   0.000% 100.000% 
[     180,     200 )      21   0.000% 100.000% 
[     200,     250 )      55   0.000% 100.000% 
[     250,     300 )      29   0.000% 100.000% 
[     300,     350 )      25   0.000% 100.000% 
[     350,     400 )      13   0.000% 100.000% 
[     400,     450 )      11   0.000% 100.000% 
[     450,     500 )       7   0.000% 100.000% 
[     500,     600 )      22   0.000% 100.000% 
[     600,     700 )       7   0.000% 100.000% 
[     700,     800 )       3   0.000% 100.000% 
[     800,     900 )       4   0.000% 100.000% 
[    1000,    1200 )      23   0.000% 100.000% 
[    1200,    1400 )      21   0.000% 100.000% 
[    1400,    1600 )      22   0.000% 100.000% 
[    1600,    1800 )      14   0.000% 100.000% 
[    1800,    2000 )      18   0.000% 100.000% 
[    2000,    2500 )      21   0.000% 100.000% 
[    2500,    3000 )       7   0.000% 100.000% 
[    3000,    3500 )      21   0.000% 100.000% 
[    3500,    4000 )      26   0.000% 100.000% 
[    4000,    4500 )      27   0.000% 100.000% 
[    4500,    5000 )      20   0.000% 100.000% 
[    5000,    6000 )      14   0.000% 100.000% 
[   10000,   12000 )       9   0.000% 100.000% 
[   12000,   14000 )       4   0.000% 100.000% 
[   14000,   16000 )      83   0.000% 100.000% 
[   16000,   18000 )       9   0.000% 100.000% 
[   18000,   20000 )      15   0.000% 100.000% 
[   20000,   25000 )      21   0.000% 100.000% 
[   25000,   30000 )       3   0.000% 100.000% 
[   30000,   35000 )       4   0.000% 100.000% 
[   35000,   40000 )       3   0.000% 100.000% 
[   45000,   50000 )       2   0.000% 100.000% 
[   90000,  100000 )       1   0.000% 100.000% 
[  100000,  120000 )      13   0.000% 100.000% 
[  120000,  140000 )      16   0.000% 100.000% 
[  200000,  250000 )       6   0.000% 100.000% 

# Run operations:       984320
# Run throughput (KOPS): 1308.16
Count: 32000000  Average: 5.9724  StdDev: 7.72
Percentiles(us): P50: 4.49 P90: 12.36 P99: 26.18 P99.9: 55.70 P99.99: 148.26
------------------------------------------------------
[       0,       1 )  353113   1.103%   1.103% 
[       1,       2 ) 6262243  19.570%  20.673% ####
[       2,       3 ) 4528157  14.150%  34.823% ###
[       3,       4 ) 3287987  10.275%  45.098% ##
[       4,       5 ) 3224665  10.077%  55.176% ##
[       5,       6 ) 3006686   9.396%  64.571% ##
[       6,       7 ) 2425579   7.580%  72.151% ##
[       7,       8 ) 1725463   5.392%  77.543% #
[       8,       9 ) 1286627   4.021%  81.564% #
[       9,      10 ) 1018200   3.182%  84.746% #
[      10,      12 ) 1495002   4.672%  89.418% #
[      12,      14 ) 1039040   3.247%  92.665% #
[      14,      16 )  722241   2.257%  94.922% 
[      16,      18 )  485054   1.516%  96.438% 
[      18,      20 )  328645   1.027%  97.465% 
[      20,      25 )  448044   1.400%  98.865% 
[      25,      30 )  183637   0.574%  99.439% 
[      30,      35 )   78040   0.244%  99.683% 
[      35,      40 )   35480   0.111%  99.793% 
[      40,      45 )   17358   0.054%  99.848% 
[      45,      50 )   10077   0.031%  99.879% 
[      50,      60 )   11696   0.037%  99.916% 
[      60,      70 )    6773   0.021%  99.937% 
[      70,      80 )    4624   0.014%  99.951% 
[      80,      90 )    3473   0.011%  99.962% 
[      90,     100 )    2623   0.008%  99.970% 
[     100,     120 )    3666   0.011%  99.982% 
[     120,     140 )    2081   0.007%  99.988% 
[     140,     160 )    1274   0.004%  99.992% 
[     160,     180 )     776   0.002%  99.995% 
[     180,     200 )     500   0.002%  99.996% 
[     200,     250 )     579   0.002%  99.998% 
[     250,     300 )     204   0.001%  99.999% 
[     300,     350 )      80   0.000%  99.999% 
[     350,     400 )      47   0.000%  99.999% 
[     400,     450 )      23   0.000%  99.999% 
[     450,     500 )      19   0.000%  99.999% 
[     500,     600 )      38   0.000%  99.999% 
[     600,     700 )      23   0.000%  99.999% 
[     700,     800 )      12   0.000% 100.000% 
[     800,     900 )      12   0.000% 100.000% 
[     900,    1000 )      34   0.000% 100.000% 
[    1000,    1200 )      30   0.000% 100.000% 
[    1200,    1400 )       6   0.000% 100.000% 
[    1400,    1600 )      12   0.000% 100.000% 
[    1600,    1800 )      14   0.000% 100.000% 
[    1800,    2000 )       6   0.000% 100.000% 
[    2000,    2500 )      10   0.000% 100.000% 
[    2500,    3000 )       3   0.000% 100.000% 
[    3000,    3500 )       4   0.000% 100.000% 
[    3500,    4000 )       8   0.000% 100.000% 
[    4000,    4500 )       3   0.000% 100.000% 
[    4500,    5000 )       5   0.000% 100.000% 
[    5000,    6000 )       2   0.000% 100.000% 
[    7000,    8000 )       2   0.000% 100.000% 
```